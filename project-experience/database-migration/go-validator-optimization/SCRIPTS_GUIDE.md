# è„šæœ¬ä½¿ç”¨æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†é¡¹ç›®ä¸­æä¾›çš„å„ç§è„šæœ¬å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ã€‚

## ğŸ“ è„šæœ¬ç›®å½•ç»“æ„

```
scripts/
â”œâ”€â”€ setup.sh        # ç¯å¢ƒè®¾ç½®è„šæœ¬
â”œâ”€â”€ dev.sh          # å¼€å‘ç¯å¢ƒè„šæœ¬
â”œâ”€â”€ test.sh         # æµ‹è¯•è„šæœ¬
â””â”€â”€ run_example.sh  # å¿«é€Ÿå¯åŠ¨è„šæœ¬
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### é¦–æ¬¡ä½¿ç”¨
```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd go-validator-optimization

# 2. è¿è¡Œç¯å¢ƒè®¾ç½®è„šæœ¬
./scripts/setup.sh

# 3. å¼€å§‹ä½¿ç”¨
./scripts/run_example.sh
```

## ğŸ”§ è„šæœ¬è¯¦ç»†è¯´æ˜

### 1. `scripts/setup.sh` - ç¯å¢ƒè®¾ç½®è„šæœ¬

**ç”¨é€”**: é¦–æ¬¡ä½¿ç”¨é¡¹ç›®æ—¶çš„ç¯å¢ƒè®¾ç½®

**åŠŸèƒ½**:
- æ£€æŸ¥Goç¯å¢ƒ
- å®‰è£…é¡¹ç›®ä¾èµ–
- æ„å»ºé¡¹ç›®
- åˆ›å»ºå¿…è¦ç›®å½•
- ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶

**ä½¿ç”¨æ–¹æ³•**:
```bash
./scripts/setup.sh
```

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸ”§ è®¾ç½®å¤šæ•°æ®åº“ä¸€è‡´æ€§éªŒè¯å·¥å…·ç¯å¢ƒ
=====================================
âœ… Goç¯å¢ƒæ£€æŸ¥é€šè¿‡: go version go1.23.8 darwin/amd64
ğŸ“¦ å®‰è£…Goä¾èµ–...
âœ… ä¾èµ–å®‰è£…å®Œæˆ
ğŸ”¨ æ„å»ºé¡¹ç›®...
âœ… é¡¹ç›®æ„å»ºå®Œæˆ
ğŸ“ åˆ›å»ºå¿…è¦ç›®å½•...
âœ… ç›®å½•åˆ›å»ºå®Œæˆ
ğŸ“ åˆ›å»ºé»˜è®¤é…ç½®æ–‡ä»¶...
âœ… é»˜è®¤é…ç½®æ–‡ä»¶å·²åˆ›å»º

ğŸ‰ ç¯å¢ƒè®¾ç½®å®Œæˆï¼

ğŸ“– ä¸‹ä¸€æ­¥:
1. ç¼–è¾‘é…ç½®æ–‡ä»¶: vim configs/config.yaml
2. è¿è¡ŒéªŒè¯: ./bin/validator-optimization validate --dry-run
3. æŸ¥çœ‹å¸®åŠ©: ./bin/validator-optimization --help
```

### 2. `scripts/dev.sh` - å¼€å‘ç¯å¢ƒè„šæœ¬

**ç”¨é€”**: å¼€å‘ç¯å¢ƒå¿«é€Ÿå¯åŠ¨

**åŠŸèƒ½**:
- æ„å»ºé¡¹ç›®
- è¿è¡Œæµ‹è¯•
- æ ¼å¼åŒ–ä»£ç 
- ä½¿ç”¨å¼€å‘é…ç½®éªŒè¯

**ä½¿ç”¨æ–¹æ³•**:
```bash
./scripts/dev.sh
```

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸš€ å¼€å‘ç¯å¢ƒå¿«é€Ÿå¯åŠ¨
===================
ğŸ”¨ æ„å»ºé¡¹ç›®...
âœ… é¡¹ç›®æ„å»ºå®Œæˆ
ğŸ§ª è¿è¡Œæµ‹è¯•...
âœ… æµ‹è¯•é€šè¿‡
ğŸ¨ æ ¼å¼åŒ–ä»£ç ...
âœ… ä»£ç æ ¼å¼åŒ–å®Œæˆ
ğŸ” ä½¿ç”¨å¼€å‘é…ç½®è¿è¡ŒéªŒè¯...
âœ… å¼€å‘ç¯å¢ƒå¯åŠ¨å®Œæˆï¼

ğŸ’¡ å¸¸ç”¨å¼€å‘å‘½ä»¤:
  make build        # æ„å»ºé¡¹ç›®
  make test         # è¿è¡Œæµ‹è¯•
  make fmt          # æ ¼å¼åŒ–ä»£ç 
  make lint         # ä»£ç æ£€æŸ¥
  make clean        # æ¸…ç†æ„å»ºäº§ç‰©
```

### 3. `scripts/test.sh` - æµ‹è¯•è„šæœ¬

**ç”¨é€”**: è¿è¡Œå®Œæ•´çš„æµ‹è¯•å¥—ä»¶

**åŠŸèƒ½**:
- è¿è¡Œå•å…ƒæµ‹è¯•
- è¿è¡ŒåŸºå‡†æµ‹è¯•
- ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
- ç«æ€æ£€æµ‹

**ä½¿ç”¨æ–¹æ³•**:
```bash
./scripts/test.sh
```

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸ§ª è¿è¡Œæµ‹è¯•å¥—ä»¶
===============
ğŸ“‹ è¿è¡Œå•å…ƒæµ‹è¯•...
âœ… å•å…ƒæµ‹è¯•é€šè¿‡
ğŸ“Š è¿è¡ŒåŸºå‡†æµ‹è¯•...
âœ… åŸºå‡†æµ‹è¯•å®Œæˆ
ğŸ“ˆ æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡...
âœ… è¦†ç›–ç‡æŠ¥å‘Šå·²ç”Ÿæˆ: coverage.html
ğŸ” è¿è¡Œç«æ€æ£€æµ‹...
âœ… ç«æ€æ£€æµ‹é€šè¿‡

âœ… æµ‹è¯•å®Œæˆï¼

ğŸ“Š æµ‹è¯•ç»“æœ:
  - å•å…ƒæµ‹è¯•: é€šè¿‡
  - åŸºå‡†æµ‹è¯•: å®Œæˆ
  - è¦†ç›–ç‡æŠ¥å‘Š: coverage.html
  - ç«æ€æ£€æµ‹: é€šè¿‡
```

### 4. `scripts/run_example.sh` - å¿«é€Ÿå¯åŠ¨è„šæœ¬

**ç”¨é€”**: å¿«é€Ÿå¯åŠ¨å’Œç¤ºä¾‹æ¼”ç¤º

**åŠŸèƒ½**:
- æ£€æŸ¥ç¯å¢ƒ
- æ„å»ºé¡¹ç›®
- åˆ›å»ºé…ç½®æ–‡ä»¶
- æä¾›ä½¿ç”¨ç¤ºä¾‹

**ä½¿ç”¨æ–¹æ³•**:
```bash
./scripts/run_example.sh
```

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸš€ å¤šæ•°æ®åº“ä¸€è‡´æ€§éªŒè¯å·¥å…· - Cobra + Viper ä¼˜åŒ–ç‰ˆæœ¬
==================================================
âœ… Goç¯å¢ƒæ£€æŸ¥é€šè¿‡: go version go1.23.8 darwin/amd64

ğŸ“– å¯ç”¨å‘½ä»¤:
  ./bin/validator-optimization --help              # æ˜¾ç¤ºå¸®åŠ©
  ./bin/validator-optimization init --help         # é…ç½®æ–‡ä»¶åˆ›å»ºå¸®åŠ©
  ./bin/validator-optimization validate --help     # éªŒè¯å‘½ä»¤å¸®åŠ©

ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹:

1. ç¼–è¾‘é…ç½®æ–‡ä»¶:
   vim configs/config.yaml

2. æ‰§è¡ŒéªŒè¯:
   ./bin/validator-optimization validate

3. è¯•è¿è¡Œæ¨¡å¼:
   ./bin/validator-optimization validate --dry-run

4. è®¾ç½®å¹¶å‘æ•°:
   ./bin/validator-optimization validate --workers 5

5. è¯¦ç»†è¾“å‡º:
   ./bin/validator-optimization validate --verbose

æ˜¯å¦è¦ç«‹å³æ‰§è¡ŒéªŒè¯? (y/N):
```

## ğŸ› ï¸ Makefile å‘½ä»¤

é™¤äº†è„šæœ¬å¤–ï¼Œé¡¹ç›®è¿˜æä¾›äº†Makefileå‘½ä»¤ï¼š

### åŸºæœ¬æ„å»º
```bash
make build              # æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶
make clean              # æ¸…ç†æ„å»ºäº§ç‰©
make run                # æ„å»ºå¹¶è¿è¡Œ
```

### å¼€å‘å·¥å…·
```bash
make test               # è¿è¡Œæµ‹è¯•
make fmt                # æ ¼å¼åŒ–ä»£ç 
make lint               # ä»£ç æ£€æŸ¥
make deps               # å®‰è£…ä¾èµ–
```

### è·¨å¹³å°æ„å»º
```bash
make build-all          # æ„å»ºæ‰€æœ‰å¹³å°ç‰ˆæœ¬
```

### é…ç½®ç®¡ç†
```bash
make init-config        # åˆ›å»ºé»˜è®¤é…ç½®
make validate-dry       # è¯•è¿è¡ŒéªŒè¯
make validate-dev       # ä½¿ç”¨å¼€å‘é…ç½®éªŒè¯
```

### ä¿¡æ¯æŸ¥çœ‹
```bash
make help               # æ˜¾ç¤ºå¸®åŠ©
make version            # æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
```

## ğŸ”„ å·¥ä½œæµç¨‹

### å¼€å‘å·¥ä½œæµ
```bash
# 1. ç¯å¢ƒè®¾ç½®ï¼ˆé¦–æ¬¡ï¼‰
./scripts/setup.sh

# 2. æ—¥å¸¸å¼€å‘
./scripts/dev.sh

# 3. è¿è¡Œæµ‹è¯•
./scripts/test.sh

# 4. æäº¤ä»£ç å‰
make fmt
make lint
make test
```

### éƒ¨ç½²å·¥ä½œæµ
```bash
# 1. æ„å»ºæ‰€æœ‰å¹³å°ç‰ˆæœ¬
make build-all

# 2. è¿è¡Œå®Œæ•´æµ‹è¯•
./scripts/test.sh

# 3. ç”Ÿäº§ç¯å¢ƒéªŒè¯
./bin/validator-optimization validate --config configs/prod.yaml --dry-run
```

## ğŸ› æ•…éšœæ’é™¤

### è„šæœ¬æ‰§è¡Œæƒé™é—®é¢˜
```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x scripts/*.sh
```

### Goç¯å¢ƒé—®é¢˜
```bash
# æ£€æŸ¥Goç‰ˆæœ¬
go version

# å®‰è£…ä¾èµ–
go mod tidy
```

### æ„å»ºé—®é¢˜
```bash
# æ¸…ç†å¹¶é‡æ–°æ„å»º
make clean
make build
```

## ğŸ“ è‡ªå®šä¹‰è„šæœ¬

ä½ å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºè‡ªå®šä¹‰è„šæœ¬ï¼š

```bash
# åˆ›å»ºè‡ªå®šä¹‰è„šæœ¬
touch scripts/my-script.sh
chmod +x scripts/my-script.sh

# è„šæœ¬æ¨¡æ¿
#!/bin/bash
set -e

echo "ğŸš€ æˆ‘çš„è‡ªå®šä¹‰è„šæœ¬"
echo "================="

# åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•
cd "$(dirname "$0")/.."

# ä½ çš„è„šæœ¬é€»è¾‘
echo "âœ… è„šæœ¬æ‰§è¡Œå®Œæˆ"
```

## ğŸ“ æ”¯æŒ

å¦‚æœ‰è„šæœ¬ä½¿ç”¨é—®é¢˜ï¼Œè¯·ï¼š
1. æ£€æŸ¥è„šæœ¬æ‰§è¡Œæƒé™
2. ç¡®è®¤Goç¯å¢ƒæ­£ç¡®
3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
4. æäº¤Issueæˆ–è”ç³»ç»´æŠ¤è€…
