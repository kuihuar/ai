# 音视频编解码技术

音视频编解码器详解和选择指南。

## 目录

- [音频编解码](#音频编解码)
- [视频编解码](#视频编解码)
- [编码参数](#编码参数)
- [性能优化](#性能优化)

---

## 音频编解码

### Opus

**特点：**
- WebRTC 默认编码器
- 低延迟（2.5-60ms）
- 高质量
- 开源免费

**参数：**
- 采样率：8-48kHz
- 比特率：6-510 kbps
- 延迟：2.5-60ms

**适用场景：**
- 实时通话
- 视频会议
- 在线游戏

### AAC

**特点：**
- 高质量
- 广泛支持
- 专利授权

**参数：**
- 采样率：8-96kHz
- 比特率：8-320 kbps

**适用场景：**
- 直播推流
- 点播视频
- 音乐流媒体

### G.711

**特点：**
- 传统电话标准
- 低复杂度
- 低质量

**适用场景：**
- VoIP 电话
- 传统系统兼容

---

## 视频编解码

### VP8/VP9

**特点：**
- Google 开源
- WebRTC 常用
- 无专利问题

**VP8 参数：**
- 分辨率：最高 2048x2048
- 帧率：最高 60fps
- 比特率：可变

**VP9 参数：**
- 分辨率：最高 8192x8192
- 压缩比：比 VP8 高 50%
- 计算复杂度：更高

**适用场景：**
- WebRTC 应用
- 开源项目
- 浏览器应用

### H.264

**特点：**
- 广泛支持
- 硬件加速好
- 专利授权

**参数：**
- 分辨率：最高 4096x4096
- 帧率：最高 300fps
- Profile：Baseline, Main, High

**适用场景：**
- 直播推流
- 点播视频
- 硬件编码

### H.265 (HEVC)

**特点：**
- 高压缩比（比 H.264 高 50%）
- 高复杂度
- 专利问题

**适用场景：**
- 4K/8K 视频
- 带宽受限场景

### AV1

**特点：**
- 新一代编码器
- 开源免费
- 高压缩比
- 高复杂度

**适用场景：**
- 未来应用
- 开源项目
- 高质量需求

---

## 编码参数

### 音频编码参数

**比特率选择：**
```
语音通话：16-32 kbps
音乐：64-128 kbps
高质量：128-256 kbps
```

**采样率选择：**
```
电话质量：8 kHz
语音：16 kHz
音乐：44.1/48 kHz
```

### 视频编码参数

**分辨率选择：**
```
移动端：360p, 480p
桌面端：720p, 1080p
高质量：2K, 4K
```

**帧率选择：**
```
静态场景：15 fps
一般场景：30 fps
动态场景：60 fps
```

**GOP (Group of Pictures) 设置：**
```
低延迟：GOP = 30 (1秒)
一般：GOP = 60 (2秒)
高质量：GOP = 90 (3秒)
```

---

## 性能优化

### 1. 编码速度优化

**方法：**
- 使用硬件编码
- 降低编码复杂度
- 多线程编码
- 降低分辨率

### 2. 质量优化

**方法：**
- 提高比特率
- 使用更好的编码器
- 优化编码参数
- 预处理优化

### 3. 延迟优化

**方法：**
- 使用低延迟编码器
- 减少 GOP 大小
- 降低缓冲
- 快速编码模式

---

## 编码器选择指南

### 实时通话场景

**推荐：**
- 音频：Opus
- 视频：VP8/VP9 或 H.264

**原因：**
- 低延迟
- 高质量
- 广泛支持

### 直播推流场景

**推荐：**
- 音频：AAC
- 视频：H.264

**原因：**
- 高质量
- 硬件加速
- 广泛兼容

### 点播视频场景

**推荐：**
- 音频：AAC
- 视频：H.264 或 H.265

**原因：**
- 高压缩比
- 存储优化
- 播放兼容

---

## 参考资料

- [Opus 编码器](https://opus-codec.org/)
- [VP9 编码器](https://www.webmproject.org/)
- [H.264 标准](https://www.itu.int/rec/T-REC-H.264)

